local plr = game.Players.LocalPlayer
local uis = game:GetService("UserInputService")
local run = game:GetService("RunService")
local sg = game:GetService("StarterGui")

local SETTINGS = {
    KingMode = false,
    SuperJump = false,
    NoClip = false,
    ESPMen = false,
    ESPTime = false,
    ESPName = false,
}

local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "czwuyiHub"

-- Icon Button
local iconBtn = Instance.new("TextButton", gui)
iconBtn.Size = UDim2.new(0, 50, 0, 50)
iconBtn.Position = UDim2.new(0, 10, 0, 10)
iconBtn.Text = "c"
iconBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
iconBtn.TextColor3 = Color3.fromRGB(255, 0, 0)
iconBtn.Font = Enum.Font.Fantasy
iconBtn.TextSize = 30
iconBtn.AutoButtonColor = false
iconBtn.BorderSizePixel = 0
iconBtn.BackgroundTransparency = 0.1
Instance.new("UICorner", iconBtn).CornerRadius = UDim.new(0, 12)

-- Main Frame
local mainFrame = Instance.new("Frame", gui)
mainFrame.Name = "mainFrame"
mainFrame.Size = UDim2.new(0, 420, 0, 280)
mainFrame.Position = UDim2.new(0, 70, 0, 10)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.Visible = true
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)

-- ESP Frame
local espFrame = Instance.new("Frame", gui)
espFrame.Size = UDim2.new(0, 420, 0, 280)
espFrame.Position = UDim2.new(0, 70, 0, 10)
espFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
espFrame.Visible = false
espFrame.Active = true
espFrame.Draggable = true
Instance.new("UICorner", espFrame).CornerRadius = UDim.new(0, 10)

-- Title (Changed to "czwuyi Hub")
local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "czwuyi Hub"
title.TextColor3 = Color3.new(1, 1, 1)
title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 10)

-- Function to create toggle buttons
local function createToggle(text, key, posX, posY, parent)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0, 180, 0, 30)
    btn.Position = UDim2.new(0, posX, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 18
    btn.Text = text .. ": OFF"
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
    btn.MouseButton1Click:Connect(function()
        SETTINGS[key] = not SETTINGS[key]
        btn.Text = text .. ": " .. (SETTINGS[key] and "ON" or "OFF")
    end)
    return btn
end

-- Create toggles
createToggle("King Mode", "KingMode", 10, 40, mainFrame)
createToggle("Super Jump", "SuperJump", 10, 80, mainFrame)
createToggle("NoClip", "NoClip", 10, 120, mainFrame)
createToggle("ESP Men", "ESPMen", 10, 40, espFrame)
createToggle("ESP Time", "ESPTime", 10, 80, espFrame)
createToggle("ESP Name", "ESPName", 10, 120, espFrame)

-- ESP Menu Button
local espMenuBtn = Instance.new("TextButton", mainFrame)
espMenuBtn.Size = UDim2.new(0, 180, 0, 30)
espMenuBtn.Position = UDim2.new(0, 10, 0, 160)
espMenuBtn.Text = "ESP Menu >>"
espMenuBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
espMenuBtn.TextColor3 = Color3.new(1, 1, 1)
espMenuBtn.Font = Enum.Font.SourceSansBold
espMenuBtn.TextSize = 18
Instance.new("UICorner", espMenuBtn).CornerRadius = UDim.new(0, 6)
espMenuBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = false
    espFrame.Visible = true
end)

-- Back Button
local backBtn = Instance.new("TextButton", espFrame)
backBtn.Size = UDim2.new(0, 180, 0, 30)
backBtn.Position = UDim2.new(0, 10, 0, 160)
backBtn.Text = "<< Back to Main"
backBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
backBtn.TextColor3 = Color3.new(1, 1, 1)
backBtn.Font = Enum.Font.SourceSansBold
backBtn.TextSize = 18
Instance.new("UICorner", backBtn).CornerRadius = UDim.new(0, 6)
backBtn.MouseButton1Click:Connect(function()
    espFrame.Visible = false
    mainFrame.Visible = true
end)

-- Site Button (kept but renamed)
local siteBtn = Instance.new("TextButton", mainFrame)
siteBtn.Size = UDim2.new(0, 180, 0, 30)
siteBtn.Position = UDim2.new(0, 210, 0, 40)
siteBtn.Text = "Scripts"
siteBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
siteBtn.TextColor3 = Color3.new(1, 1, 1)
siteBtn.Font = Enum.Font.SourceSansBold
siteBtn.TextSize = 18
Instance.new("UICorner", siteBtn).CornerRadius = UDim.new(0, 6)
siteBtn.MouseButton1Click:Connect(function()
    setclipboard("https://example.com") -- Replace with your desired link
    sg:SetCore("SendNotification", { Title = "Copied!", Text = "Link copied!", Duration = 3 })
end)

-- Teleport Button
local teleportBtn = Instance.new("TextButton", mainFrame)
teleportBtn.Size = UDim2.new(0, 180, 0, 30)
teleportBtn.Position = UDim2.new(0, 210, 0, 80)
teleportBtn.Text = "Teleport"
teleportBtn.BackgroundColor3 = Color3.fromRGB(0, 60, 120)
teleportBtn.TextColor3 = Color3.new(1, 1, 1)
teleportBtn.Font = Enum.Font.SourceSansBold
teleportBtn.TextSize = 18
Instance.new("UICorner", teleportBtn).CornerRadius = UDim.new(0, 6)

local teleportPoint = nil
local teleporting = false

teleportBtn.MouseButton1Click:Connect(function()
    if teleporting or not plr.Character then return end
    local hrp = plr.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    local char = plr.Character
    char.PrimaryPart = hrp

    if not teleportPoint then
        teleportPoint = hrp.Position
        teleportBtn.Text = "Point Saved!"
        wait(1)
        teleportBtn.Text = "Teleport"
    else
        teleporting = true
        teleportBtn.Text = "Teleporting..."
        hrp.Anchored = true
        char:SetPrimaryPartCFrame(CFrame.new(teleportPoint))
        wait(5)
        hrp.Anchored = false
        teleportBtn.Text = "Teleport"
        teleportPoint = nil
        teleporting = false
    end
end)

-- Close Button
local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 180, 0, 30)
closeBtn.Position = UDim2.new(0, 210, 0, 120)
closeBtn.Text = "Close GUI"
closeBtn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
closeBtn.TextColor3 = Color3.new(1, 1, 1)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 6)
closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

-- Footer
local footer = Instance.new("TextLabel", mainFrame)
footer.Size = UDim2.new(0, 200, 0, 20)
footer.Position = UDim2.new(1, -200, 1, -20)
footer.Text = "czwuyi Hub"
footer.TextColor3 = Color3.new(1, 1, 1)
footer.BackgroundTransparency = 1
footer.Font = Enum.Font.SourceSansItalic
footer.TextSize = 14

-- Icon button toggle functionality
iconBtn.MouseButton1Click:Connect(function()
    mainFrame.Visible = not (mainFrame.Visible or espFrame.Visible)
    espFrame.Visible = false
end)

-- Functionality for the features
run.RenderStepped:Connect(function()
    if SETTINGS.KingMode and plr.Character then
        local hum = plr.Character:FindFirstChildWhichIsA("Humanoid")
        if hum and hum.Health < hum.MaxHealth then
            hum.Health = hum.MaxHealth
            hum.PlatformStand = false
            hum.Sit = false
        end
    end

    for _, p in pairs(game.Players:GetPlayers()) do
        if p ~= plr and p.Character then
            local esp = p.Character:FindFirstChild("PelimenESP")
            if SETTINGS.ESPMen and not esp then
                local h = Instance.new("Highlight", p.Character)
                h.Name = "czwuyiESP"
                h.FillColor = Color3.fromRGB(255, 0, 0)
                h.OutlineColor = Color3.fromRGB(255, 255, 255)
            elseif not SETTINGS.ESPMen and esp then
                esp:Destroy()
            end

            if SETTINGS.ESPName then
                if not p.Character:FindFirstChild("czwuyiName") then
                    local bill = Instance.new("BillboardGui", p.Character)
                    bill.Name = "czwuyiName"
                    bill.Adornee = p.Character:FindFirstChild("Head")
                    bill.Size = UDim2.new(0, 100, 0, 40)
                    bill.AlwaysOnTop = true
                    local txt = Instance.new("TextLabel", bill)
                    txt.Size = UDim2.new(1, 0, 1, 0)
                    txt.Text = p.Name
                    txt.TextColor3 = Color3.new(1, 0, 0)
                    txt.BackgroundTransparency = 1
                    txt.TextScaled = true
                end
            else
                local tag = p.Character:FindFirstChild("czwuyiName")
                if tag then tag:Destroy() end
            end
        end
    end
end)

-- Super Jump
uis.JumpRequest:Connect(function()
    if SETTINGS.SuperJump then
        local hum = plr.Character and plr.Character:FindFirstChildWhichIsA("Humanoid")
        if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

-- NoClip
run.Stepped:Connect(function()
    if SETTINGS.NoClip and plr.Character then
        for _, v in pairs(plr.Character:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CanCollide = false
            end
        end
    end
end)

-- Filter for "God"
local function blurGodText(obj)
    if obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox") then
        if obj.Text:match("[Gg][Oo][Dd]") then
            obj.Text = string.gsub(obj.Text, "[Gg][Oo][Dd]", "???")
        end
    end
end

local function monitorDescendants(parent)
    for _, obj in pairs(parent:GetDescendants()) do
        blurGodText(obj)
    end
    parent.DescendantAdded:Connect(function(desc)
        blurGodText(desc)
    end)
end

monitorDescendants(game.CoreGui)
monitorDescendants(game.Players.LocalPlayer.PlayerGui)
monitorDescendants(game.Workspace)
